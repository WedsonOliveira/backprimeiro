<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Atendimento</title>
</head>
<body>
    <h1>Bem-vindo ao Sistema de Atendimento</h1>

    <!-- Formulário para registrar usuário -->
    <h2>Registrar Usuário</h2>
    <form id="form-registrar">
        <label for="nome">Nome:</label>
        <input type="text" id="nome" required><br><br>

        <label for="cpf">CPF:</label>
        <input type="text" id="cpf" required><br><br>

        <button type="submit">Registrar</button>
    </form>

    <p id="mensagem"></p>

    <h2>Próximo Atendimento</h2>
    <button id="btn-proximo">Ver próximo</button>
    <p id="senha-proximo"></p>

    <h2>Finalizar Atendimento</h2>
    <button id="btn-finalizar">Finalizar atendimento</button>
    <p id="mensagem-finalizar"></p>

    <script>
        // Função para registrar um usuário
        document.getElementById("form-registrar").addEventListener("submit", function(event) {
            event.preventDefault();
            const nome = document.getElementById("nome").value;
            const cpf = document.getElementById("cpf").value;

            fetch('http://localhost:3000/registrar', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ nome, cpf })
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById("mensagem").innerText = data.mensagem + "\nSenha: " + data.senha;
            })
            .catch(error => console.error('Erro:', error));
        });

        // Função para ver o próximo atendimento
        document.getElementById("btn-proximo").addEventListener("click", function() {
            fetch('http://localhost:3000/proximo')
            .then(response => response.json())
            .then(data => {
                if (data.proximo) {
                    document.getElementById("senha-proximo").innerText = "Próxima senha: " + data.proximo;
                } else {
                    document.getElementById("senha-proximo").innerText = data.mensagem;
                }
            })
            .catch(error => console.error('Erro:', error));
        });

        // Função para finalizar o atendimento
        document.getElementById("btn-finalizar").addEventListener("click", function() {
            fetch('http://localhost:3000/finalizar', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                }
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById("mensagem-finalizar").innerText = data.mensagem + "\nPróxima senha: " + data.proximo;
            })
            .catch(error => console.error('Erro:', error));
        });
    </script>
</body>
</html>
